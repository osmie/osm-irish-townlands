{% extends 'irish_townlands/townland_base.html' %}
{% load i18n l10n humanize cache %}

{% block title %}{% trans "Irish Traditional Boundaries Progress Report" %}{% endblock %}
{% block header %}<h1>{% trans "Irish Traditional Boundaries Progress Report" %}</h1>{% endblock %}

{% block extra_headers %}
    {{ block.super }}
    <style>
        #coverage tbody tr:nth-child(even) {
            background-color: #ebebeb;
        }
        #coverage tbody td {
            padding: 8px 11px;
        }
        #coverage thead tr {
            padding-bottom: 1em;
        }
        #coverage thead td {
            text-align: center;
        }
    </style>
{% endblock %}

{% block body %}
{% cache 3600 progress %}

<ul>
    <li><a href="#countyprogress">{% trans "Progress of each county" %} ‚Üì</a></li>
    <li><a href="{% url 'duplicatenames' %}">{% trans "Duplicate townland names" %} ‚Üí</a></li>
    <li><a href="#errors">{% trans "Potential conflicts with the data" %} ‚Üì</a></li>
    <li><a href="{% url 'rate' %}">{% trans "Rate of mapping" %} ‚Üí</a></li>
    <li><a href="{% url 'activity' %}">{% trans "Mapping activity" %} ‚Üí</a></li>
</ul>

<p>{% trans "How complete is the data in Open Street Map?" %}</p>
<p>{% trans "The data in OpenStreetMap is continuously updated. This page shows how much of each county has been mapped in townlands, baronies and civil parishes" %}</p>

<a name="countyprogress"></a>
<table class=table id=coverage>
    <thead>
        <td>{% trans "County" %}</td>
        <td colspan=2>{% trans "Townlands" %}</td>
        <td colspan=2>{% trans "Electoral Divisions" %}</td>
        <td colspan=2>{% trans "Civil Parishes" %}</td>
        <td colspan=2>{% trans "Baronies" %}</td>
    </thead>
    <tbody>
        <tr>
            <td>{% trans "All Ireland" %}</td>
            <td>{{ townland_progress|floatformat:-1 }}%</td><td><progress min=0 max=100 value={{ townland_progress }}></progress></td>
            <td>{{ ed_progress|floatformat:-1 }}%</td><td><progress min=0 max=100 value={{ ed_progress }}></progress></td>
            <td>{{ civil_parish_progress|floatformat:-1 }}%</td><td><progress min=0 max=100 value={{ civil_parish_progress }}></progress></td>
            <td>{{ barony_progress|floatformat:-1 }}%</td><td><progress min=0 max=100 value={{ barony_progress }}></progress></td>
        </tr>
    {% for county in counties %}
        <tr>
            <td><a href="{% url 'view_area' county.url_path %}">{{ county.name }}</a></td>
            {% with county_townland_cover=county.townland_cover county_ed_cover=county.ed_cover county_civil_parish_cover=county.civil_parish_cover county_barony_cover=county.barony_cover %}
                <td>{{ county_townland_cover|floatformat:-1 }}%</td><td><progress min=0 max=100 value={{ county_townland_cover }}></progress></td>
                <td>{{ county_ed_cover|floatformat:-1 }}%</td><td><progress min=0 max=100 value={{ county_ed_cover }}></progress></td>
                <td>{{ county_civil_parish_cover|floatformat:-1 }}%</td><td><progress min=0 max=100 value={{ county_civil_parish_cover }}></progress></td>
                <td>{{ county_barony_cover|floatformat:-1 }}%</td><td><progress min=0 max=100 value={{ county_barony_cover }}></progress></td>
            {% endwith %}
        </tr>
    {% endfor %}

    </tbody>
</table>
<p><a href="{% url 'rate' %}">{% trans "How long will it take to finish?" %}</a></p>

<a name="duplicatenames"></a>
<h2>{% trans "Duplicate Townland Name" %}</h2>
<p><a href="{% url 'duplicatenames' %}">{% trans "Duplicate townland names have moved to a separate page" %}</a></p>

<h2><a name=errors></a>{% trans "Potential conflicts with the data" %}</h2>

<ul>
    {% for error in errors %}
        <li>{{ error }}</li>
    {% empty %}
        <li><i>{% trans 'No Errors, data is good! üòÅ' %}</i></li>
    {% endfor %}
</ul>

{% endcache %}
{% endblock %}
